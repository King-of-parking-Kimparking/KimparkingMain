<!DOCTYPE html>
<html>
<head>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <script src="/home/cwjang/projects/jspsych/jquery-csv-master/src/jquery.csv.js"></script>

    <script>


        function read_with_ajax(url,fun,holder){//url,function,just a placeholder
        holder = new XMLHttpRequest();

        holder.open('GET',url);
        holder.onload=fun;
        holder.send()

        }

        function alertTxt(){
            alert(this.response);
            allText = this.response;
            var allTextLines = allText.split(/\r\n|\n/);
            var headers = allTextLines[0].split(',');
            var lines = [];

            for (var i = 1; i < allTextLines.length; i++) {
                var data = allTextLines[i].split(',');
                if (data.length == headers.length) {

                    var tarr = [];
                    for (var j = 0; j < headers.length; j++) {
                        tarr.push(headers[j] + ":" + data[j]);
                    }
                    lines.push(tarr);
                }
            }

            alert(lines[1][4])
        }

        window.onload=function(){
            read_with_ajax('employee.csv',alertTxt)
        }



    </script>
    </head>
    <body>

    </body>
</html>
